schema: '2.0'
stages:
  train:
    cmd: python scripts/train_comet_gpt2.py --train_data_path=./data/atomic_train.tsv
      --valid_data_path=./data/atomic_dev.tsv --models_dir_path=./models
    deps:
    - path: data/atomic_dev.tsv
      md5: 96881c451979ffc2344f193c26b58ebc
      size: 5486836
    - path: data/atomic_train.tsv
      md5: 1aa4a56de15986ff156a5f9916727a22
      size: 55740025
    - path: scripts/train_comet_gpt2.py
      md5: d7bffb2dd2b25a8d93914c0a06bf5625
      size: 8567
    params:
      params.yaml:
        model.IN_LEN: 50
        model.OUT_LEN: 80
        model.model_name: ./models_manual/GPT-Janez
        train.LEARNING_RATE: 1e-05
        train.SEED: 42
        train.TRAIN_BATCH_SIZE: 64
        train.TRAIN_EPOCHS: 3
        train.VALID_EPOCHS: 1
    outs:
    - path: models/checkpoint_latest
      md5: acaee3897bb9503db69a7870f5f405d1.dir
      size: 552080766
      nfiles: 5
    - path: plots/train_metrics.json
      md5: 189af0d1723fa0f207d55c7a3dfbfc8a
      size: 49101
  test:
    cmd: python scripts/test_comet_gpt2.py --test_data_path=./data/atomic_test.tsv
      --models_dir_path=./models/checkpoint_latest --results_dir_path=./results
    deps:
    - path: data/atomic_test.tsv
      md5: 80d038c7ce5794b9a338ea1ad4352c21
      size: 8121289
    - path: models/checkpoint_latest
      md5: acaee3897bb9503db69a7870f5f405d1.dir
      size: 552080766
      nfiles: 5
    - path: scripts/test_comet_gpt2.py
      md5: 41bfd7d757ef3ccb3746681acf95a59f
      size: 5499
    params:
      params.yaml:
        test.TEST_TOP_K: 40
    outs:
    - path: results/pred_generations.jsonl
      md5: ccbcae17e146b83813f8e7e09b5e1eaa
      size: 12315187
  eval:
    cmd: python scripts/eval_comet_gpt2.py --pred_file_path=./results/pred_generations.jsonl
    deps:
    - path: data/atomic_test.tsv
      md5: 80d038c7ce5794b9a338ea1ad4352c21
      size: 8121289
    - path: results/pred_generations.jsonl
      md5: ccbcae17e146b83813f8e7e09b5e1eaa
      size: 12315187
    - path: scripts/eval_comet_gpt2.py
      md5: 662330cf041f1dd2ca189e4f5c002d07
      size: 6553
    - path: scripts/evaluation
      md5: 5ecc2436e260cfed981b5235c8adb4ea.dir
      size: 6410770
      nfiles: 38
    outs:
    - path: results/pred_generations_gens_scores.jsonl
      md5: 3df1a6d5238bb0e28d3b6103004b17d7
      size: 215
